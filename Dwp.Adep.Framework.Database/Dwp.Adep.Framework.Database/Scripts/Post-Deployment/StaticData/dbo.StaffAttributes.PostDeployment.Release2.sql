/****************************************************************************************************************
** Created by: sp_CreateDataFromTablesToInsertCommands                                                         **
*****************************************************************************************************************
** WARNING - IF A TABLE CONTAINS A DATATYPE OF TEXT OR NTEXT ONLY 8K OR 4K CHARS FROM THIS FIELD WILL BE       **
**           RETURNED RESPECTIVELY.                                                                            **
**                                                                                                             **
** BINARY, VARBINARY AND IMAGES ARE CURRENTLY NOT HANDLED AT ALL                                               **
** DATE EXECUTED: Jan 17 2013  5:40PM                                                           **
*****************************************************************************************************************/
/****************************************
** Inserts for StaffAttributes
****************************************/
PRINT 'Inserts for StaffAttributes'
--insertstatement
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PRINT 'Updating static data table StaffAttributes'

-- Set to your regions date format to ensure dates are updated correctly

SET DATEFORMAT dmy

-- 1: Define table variable
SELECT * INTO #tempTable FROM StaffAttributes WHERE 1 = 0


-- 2: Populate the table variable with data
-- This is where you manage your data in source control. You
-- can add and modify entries, but because of potential foreign
-- key contraint violations this script will not delete any
-- removed entries. If you remove an entry then it will no longer
-- be added to new databases based on your schema, but the entry
-- will not be deleted from databases in which the value already exists.

INSERT INTO #tempTable ([Code], [SecurityLabel], [StaffCode], [ApplicationCode], [ApplicationAttributeCode], [LookupValue], [IsActive], [RowIdentifier]) VALUES ('997DD322-7DF6-4BE1-821E-3D4E5FA10C41', '39879701-FB41-4331-A069-A57D93F171BE', 'EAEE7A91-754B-4499-958D-1306989F248A', 'BC0D238F-18BE-427D-B53C-B68F8B27DCF7', '0E213A18-13E5-4920-9DCB-F35797F588F4', 'Yes', 1, NULL)
GO
-- 3: Insert any new items into the table from the table variable
IF '$(IncludeStaticDataRelease2)' = 'true'
BEGIN

INSERT INTO StaffAttributes 
SELECT 
Code,
SecurityLabel,
StaffCode,
ApplicationCode,
ApplicationAttributeCode,
LookupValue,
IsActive,
NULL
FROM #tempTable WHERE [Code] NOT IN (SELECT [Code] FROM StaffAttributes)

UPDATE LiveTable SET
 LiveTable.Code = tmp.Code,
 LiveTable.SecurityLabel = tmp.SecurityLabel,
 LiveTable.StaffCode = tmp.StaffCode,
 LiveTable.ApplicationCode = tmp.ApplicationCode,
 LiveTable.ApplicationAttributeCode = tmp.ApplicationAttributeCode,
 LiveTable.LookupValue = tmp.LookupValue,
 LiveTable.IsActive = tmp.IsActive

FROM StaffAttributes LiveTable 
	INNER JOIN 
		#tempTable tmp 
			ON LiveTable.Code = tmp.Code
END
DROP TABLE #temptable

PRINT 'Finished updating static data table'

GO
