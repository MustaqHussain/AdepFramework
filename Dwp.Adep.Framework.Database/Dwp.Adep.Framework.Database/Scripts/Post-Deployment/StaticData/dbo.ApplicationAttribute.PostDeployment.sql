/****************************************************************************************************************
** Created by: sp_CreateDataFromTablesToInsertCommands                                                         **
*****************************************************************************************************************
** WARNING - IF A TABLE CONTAINS A DATATYPE OF TEXT OR NTEXT ONLY 8K OR 4K CHARS FROM THIS FIELD WILL BE       **
**           RETURNED RESPECTIVELY.                                                                            **
**                                                                                                             **
** BINARY, VARBINARY AND IMAGES ARE CURRENTLY NOT HANDLED AT ALL                                               **
** DATE EXECUTED: Jan 17 2013  5:24PM                                                           **
*****************************************************************************************************************/
/****************************************
** Inserts for ApplicationAttribute
****************************************/
PRINT 'Inserts for ApplicationAttribute'
--insertstatement
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PRINT 'Updating static data table ApplicationAttribute'

-- Set to your regions date format to ensure dates are updated correctly

SET DATEFORMAT dmy

-- 1: Define table variable
SELECT * INTO #tempTable FROM ApplicationAttribute WHERE 1 = 0


-- 2: Populate the table variable with data
-- This is where you manage your data in source control. You
-- can add and modify entries, but because of potential foreign
-- key contraint violations this script will not delete any
-- removed entries. If you remove an entry then it will no longer
-- be added to new databases based on your schema, but the entry
-- will not be deleted from databases in which the value already exists.

INSERT INTO #tempTable ([Code], [ApplicationCode], [AttributeName], [AttributeType], [IsDataSecurity], [IsActive], [IsRole], [RowIdentifier]) VALUES ('BC17F8CD-F976-466A-9763-122CBC4E3F45', '07653ABF-406F-43BC-B41A-C2FFA727138C', 'BCAS-MI-USER', 'Bool', 0, 1, 1, NULL)
INSERT INTO #tempTable ([Code], [ApplicationCode], [AttributeName], [AttributeType], [IsDataSecurity], [IsActive], [IsRole], [RowIdentifier]) VALUES ('24F1A84E-FE90-46CD-B8BE-1B7AD891C510', '07653ABF-406F-43BC-B41A-C2FFA727138C', 'BCAS-ACCURACYCHECKER', 'Bool', 0, 1, 1, NULL)
INSERT INTO #tempTable ([Code], [ApplicationCode], [AttributeName], [AttributeType], [IsDataSecurity], [IsActive], [IsRole], [RowIdentifier]) VALUES ('1082B21F-FAB8-4CBD-A880-28E57A4C3574', '07653ABF-406F-43BC-B41A-C2FFA727138C', 'BCAS-AGENT', 'Bool', 0, 1, 1, NULL)
INSERT INTO #tempTable ([Code], [ApplicationCode], [AttributeName], [AttributeType], [IsDataSecurity], [IsActive], [IsRole], [RowIdentifier]) VALUES ('0EE1B718-F64A-41CE-91D9-29383C794776', '07653ABF-406F-43BC-B41A-C2FFA727138C', 'BCAS-AccessLevel', 'int', 0, 1, 0, NULL)
INSERT INTO #tempTable ([Code], [ApplicationCode], [AttributeName], [AttributeType], [IsDataSecurity], [IsActive], [IsRole], [RowIdentifier]) VALUES ('990AA41F-0718-4B40-B350-C7F4F09F5CA1', '07653ABF-406F-43BC-B41A-C2FFA727138C', 'BCAS-TEAMLEADER', 'Bool', 0, 1, 1, NULL)
INSERT INTO #tempTable ([Code], [ApplicationCode], [AttributeName], [AttributeType], [IsDataSecurity], [IsActive], [IsRole], [RowIdentifier]) VALUES ('019B28FE-D49D-4696-B51E-E597FBF0F96E', '07653ABF-406F-43BC-B41A-C2FFA727138C', 'BCAS-ADMIN', 'Bool', 0, 1, 1, NULL)
INSERT INTO #tempTable ([Code], [ApplicationCode], [AttributeName], [AttributeType], [IsDataSecurity], [IsActive], [IsRole], [RowIdentifier]) VALUES ('A1D2CE88-2670-4635-A857-4D25860B29A8', '07653ABF-406F-43BC-B41A-C2FFA727138C', 'BCAS-MANAGEMENTCHECKADMIN', 'Bool', 0, 1, 1, NULL)

GO
-- 3: Insert any new items into the table from the table variable
IF '$(IncludeStaticDataRelease1)' = 'true'
BEGIN

INSERT INTO ApplicationAttribute 
SELECT 
Code,
ApplicationCode,
AttributeName,
AttributeType,
IsDataSecurity,
IsActive,
IsRole,
NULL
FROM #tempTable WHERE [Code] NOT IN (SELECT [Code] FROM ApplicationAttribute)

UPDATE LiveTable SET
 LiveTable.Code = tmp.Code,
 LiveTable.ApplicationCode = tmp.ApplicationCode,
 LiveTable.AttributeName = tmp.AttributeName,
 LiveTable.AttributeType = tmp.AttributeType,
 LiveTable.IsDataSecurity = tmp.IsDataSecurity,
 LiveTable.IsActive = tmp.IsActive,
 LiveTable.IsRole = tmp.IsRole

FROM ApplicationAttribute LiveTable 
	INNER JOIN 
		#tempTable tmp 
			ON LiveTable.Code = tmp.Code
END
DROP TABLE #temptable

PRINT 'Finished updating static data table'

GO